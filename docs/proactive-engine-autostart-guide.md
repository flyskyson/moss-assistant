# ä¸»åŠ¨æ€§å¼•æ“ - è‡ªåŠ¨å¯åŠ¨é…ç½®æŒ‡å—

**æ—¥æœŸ**: 2026-02-09
**ç›®æ ‡**: è®©ä¸»åŠ¨æ€§å¼•æ“åœ¨ç³»ç»Ÿå¯åŠ¨æ—¶è‡ªåŠ¨è¿è¡Œ

---

## ğŸ¯ ä»€ä¹ˆæ˜¯è‡ªåŠ¨å¯åŠ¨ï¼Ÿ

è‡ªåŠ¨å¯åŠ¨ï¼ˆAuto-Startï¼‰æ„å‘³ç€ï¼š
- âœ… ç³»ç»Ÿå¯åŠ¨åè‡ªåŠ¨è¿è¡Œä¸»åŠ¨æ€§å¼•æ“
- âœ… å¼•æ“å´©æºƒæ—¶è‡ªåŠ¨é‡å¯
- âœ… æ— éœ€æ‰‹åŠ¨æ‰§è¡Œå¯åŠ¨å‘½ä»¤
- âœ… 7Ã—24å°æ—¶æŒç»­ç›‘æ§

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…è‡ªåŠ¨å¯åŠ¨

```bash
cd ~/clawd
./scripts/proactive-engine-auto-install.sh install
```

**å®‰è£…è¿‡ç¨‹**ï¼š
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ä¸»åŠ¨æ€§å¼•æ“è‡ªåŠ¨å¯åŠ¨å®‰è£…                                     â•‘
â•‘   Proactive Engine Auto-Start Installation                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… æ•°æ®ç›®å½•: /Users/lijian/clawd/proactive-data

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ å®‰è£… launchd é…ç½®æ–‡ä»¶
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… å·²å¤åˆ¶åˆ°: /Users/lijian/clawd/Library/LaunchAgents/com.clawd.proactive-engine.plist

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸš€ åŠ è½½å¹¶å¯åŠ¨æœåŠ¡
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… launchd agent å·²åŠ è½½

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š éªŒè¯çŠ¶æ€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… ä¸»åŠ¨æ€§å¼•æ“è‡ªåŠ¨å¯åŠ¨å·²é…ç½®

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ‰ ä¸»åŠ¨æ€§å¼•æ“ç°åœ¨ä¼šè‡ªåŠ¨å¯åŠ¨ï¼                               â•‘
â•‘  ç³»ç»Ÿé‡å¯åä¼šè‡ªåŠ¨è¿è¡Œ                                         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ“‹ ç®¡ç†å‘½ä»¤

### æŸ¥çœ‹çŠ¶æ€

```bash
./scripts/proactive-engine-auto-install.sh status
```

### æ‰‹åŠ¨ç®¡ç†

```bash
# åœæ­¢æœåŠ¡
launchctl stop com.clawd.proactive-engine

# å¯åŠ¨æœåŠ¡
launchctl start com.clawd.proactive-engine

# é‡å¯æœåŠ¡
launchctl unload ~/Library/LaunchAgents/com.clawd.proactive-engine.plist
launchctl load ~/Library/LaunchAgents/com.clawd.proactive-engine.plist
```

### å¸è½½è‡ªåŠ¨å¯åŠ¨

```bash
./scripts/proactive-engine-auto-install.sh uninstall
```

---

## ğŸ”§ å·¥ä½œåŸç†

### Launchd æœºåˆ¶

macOS ä½¿ç”¨ **launchd** ç³»ç»Ÿæ¥ç®¡ç†åå°æœåŠ¡ï¼š

```
ç³»ç»Ÿå¯åŠ¨
    â†“
launchd åŠ è½½ ~/Library/LaunchAgents/*.plist
    â†“
æ ¹æ®é…ç½®å¯åŠ¨æœåŠ¡
    â†“
KeepAlive: å¦‚æœè¿›ç¨‹å´©æºƒï¼Œè‡ªåŠ¨é‡å¯
```

### é…ç½®æ–‡ä»¶

**ä½ç½®**: `~/Library/LaunchAgents/com.clawd.proactive-engine.plist`

**å…³é”®é…ç½®**:
```xml
<key>Label</key>
<string>com.clawd.proactive-engine</string>

<key>ProgramArguments</key>
<array>
    <string>/Users/lijian/clawd/scripts/proactive-engine.py</string>
    <string>main</string>
    <string>daemon</string>
</array>

<key>RunAtLoad</key>
<true/>

<key>KeepAlive</key>
<dict>
    <key>Crashed</key>
    <true/>
</dict>
```

**è¯´æ˜**:
- `Label`: å”¯ä¸€æ ‡è¯†ç¬¦
- `ProgramArguments`: è¦æ‰§è¡Œçš„å‘½ä»¤å’Œå‚æ•°
- `RunAtLoad`: åŠ è½½æ—¶ç«‹å³è¿è¡Œ
- `KeepAlive`: è¿›ç¨‹å´©æºƒæ—¶è‡ªåŠ¨é‡å¯

---

## ğŸ“Š æ—¥å¿—æ–‡ä»¶

### æ—¥å¿—ä½ç½®

```
~/clawd/proactive-data/
â”œâ”€â”€ launchd-stdout.log    # æ ‡å‡†è¾“å‡ºæ—¥å¿—
â”œâ”€â”€ launchd-stderr.log    # é”™è¯¯è¾“å‡ºæ—¥å¿—
â””â”€â”€ proactive-engine.log  # å¼•æ“è¿è¡Œæ—¥å¿—
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹å¼•æ“æ—¥å¿—
tail -f ~/clawd/proactive-data/proactive-engine.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f ~/clawd/proactive-data/launchd-stderr.log

# æŸ¥çœ‹æœ€è¿‘50è¡Œ
tail -50 ~/clawd/proactive-data/proactive-engine.log
```

---

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯1: æ—¥å¸¸ä½¿ç”¨

```
å®‰è£…ä¸€æ¬¡å:
â”œâ”€ ç³»ç»Ÿå¯åŠ¨ â†’ å¼•æ“è‡ªåŠ¨è¿è¡Œ
â”œâ”€ å¼•æ“å´©æºƒ â†’ è‡ªåŠ¨é‡å¯
â””â”€ æŒç»­ç›‘æ§ â†’ æ— éœ€å¹²é¢„

ä½ åªéœ€è¦:
â”œâ”€ å®šæœŸæŸ¥çœ‹æŠ¥å‘Š
â””â”€ æ ¹æ®å»ºè®®æ‰§è¡Œä¼˜åŒ–
```

### åœºæ™¯2: æ‰‹åŠ¨å¯åŠ¨

å¦‚æœä½ ä¸æƒ³è‡ªåŠ¨å¯åŠ¨ï¼Œå¯ä»¥ï¼š

```bash
# åœæ­¢è‡ªåŠ¨å¯åŠ¨
launchctl stop com.clawd.proactive-engine

# æ‰‹åŠ¨å¯åŠ¨
cd ~/clawd
./scripts/proactive-engine-control.sh main start
```

### åœºæ™¯3: ä¸´æ—¶ç¦ç”¨

```bash
# å¸è½½è‡ªåŠ¨å¯åŠ¨
./scripts/proactive-engine-auto-install.sh uninstall

# éœ€è¦æ—¶å†å®‰è£…
./scripts/proactive-engine-auto-install.sh install
```

---

## âš ï¸ æ•…éšœæ’é™¤

### é—®é¢˜1: æœåŠ¡æœªå¯åŠ¨

**æ£€æŸ¥**:
```bash
launchctl list | grep proactive-engine
```

**è§£å†³**:
```bash
# é‡æ–°åŠ è½½
launchctl unload ~/Library/LaunchAgents/com.clawd.proactive-engine.plist
launchctl load ~/Library/LaunchAgents/com.clawd.proactive-engine.plist

# å¯åŠ¨æœåŠ¡
launchctl start com.clawd.proactive-engine
```

### é—®é¢˜2: å¯åŠ¨å¤±è´¥

**æ£€æŸ¥æ—¥å¿—**:
```bash
tail -50 ~/clawd/proactive-data/launchd-stderr.log
```

**å¸¸è§åŸå› **:
- Python3 æœªå®‰è£…
- è„šæœ¬è·¯å¾„ä¸æ­£ç¡®
- æƒé™é—®é¢˜

### é—®é¢˜3: æœåŠ¡ä¸æ–­é‡å¯

**æ£€æŸ¥**:
```bash
# æŸ¥çœ‹æ—¥å¿—ä¸­çš„é”™è¯¯
tail -50 ~/clawd/proactive-data/launchd-stderr.log

# æ‰‹åŠ¨æµ‹è¯•å¯åŠ¨
cd ~/clawd
python3 scripts/proactive-engine.py main daemon
```

---

## ğŸ”„ æ›´æ–°å’Œç»´æŠ¤

### æ›´æ–°å¼•æ“ä»£ç 

å¦‚æœæ›´æ–°äº† `proactive-engine.py`ï¼š

```bash
# é‡å¯æœåŠ¡
launchctl stop com.clawd.proactive-engine
launchctl start com.clawd.proactive-engine

# æˆ–è€…é‡æ–°åŠ è½½
launchctl unload ~/Library/LaunchAgents/com.clawd.proactive-engine.plist
launchctl load ~/Library/LaunchAgents/com.clawd.proactive-engine.plist
```

### æ›´æ–°é…ç½®

å¦‚æœæ›´æ–°äº† `com.clawd.proactive-engine.plist`ï¼š

```bash
# é‡æ–°åŠ è½½é…ç½®
launchctl unload ~/Library/LaunchAgents/com.clawd.proactive-engine.plist
launchctl load ~/Library/LaunchAgents/com.clawd.proactive-engine.plist
```

---

## âœ… éªŒè¯æ¸…å•

### å®‰è£…åéªŒè¯

- [ ] `launchctl list | grep proactive-engine` æ˜¾ç¤ºæœåŠ¡
- [ ] `~/clawd/proactive-data/proactive-engine.log` æœ‰æ–°å†…å®¹
- [ ] `~/clawd/proactive-data/metrics.jsonl` æ•°æ®åœ¨å¢é•¿
- [ ] ç³»ç»Ÿé‡å¯åæœåŠ¡è‡ªåŠ¨è¿è¡Œ

### è¿è¡ŒçŠ¶æ€éªŒè¯

```bash
# 1. æ£€æŸ¥æœåŠ¡çŠ¶æ€
launchctl list | grep proactive-engine

# 2. æŸ¥çœ‹æ—¥å¿—
tail -20 ~/clawd/proactive-data/proactive-engine.log

# 3. æ£€æŸ¥æ•°æ®
ls -l ~/clawd/proactive-data/metrics.jsonl

# 4. ç”ŸæˆæŠ¥å‘Š
cd ~/clawd
./scripts/proactive-engine-control.sh main report
```

---

## ğŸ¯ æ ¸å¿ƒä»·å€¼

### 1. è‡ªåŠ¨åŒ–

```
æ‰‹åŠ¨å¯åŠ¨ â†’ æ¯æ¬¡éƒ½è¦å¯åŠ¨
è‡ªåŠ¨å¯åŠ¨ â†’ å®‰è£…ä¸€æ¬¡ï¼Œæ°¸ä¹…è¿è¡Œ
```

### 2. å¯é æ€§

```
KeepAlive â†’ å´©æºƒè‡ªåŠ¨é‡å¯
æŒç»­ç›‘æ§ â†’ 7Ã—24å°æ—¶è¿è¡Œ
```

### 3. é€æ˜æ€§

```
å®Œæ•´æ—¥å¿— â†’ æ‰€æœ‰è¡Œä¸ºå¯è¿½æº¯
æ ‡å‡†æ¥å£ â†’ æ˜“äºç®¡ç†å’Œè°ƒè¯•
```

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

1. **[proactive-engine-complete.md](proactive-engine-complete.md)** - å®ŒæˆæŠ¥å‘Š
2. **[proactive-engine-user-guide.md](proactive-engine-user-guide.md)** - ç”¨æˆ·æŒ‡å—
3. **[proactive-engine-architecture.md](proactive-engine-architecture.md)** - æ¶æ„è®¾è®¡

---

## ğŸš€ ç«‹å³å¼€å§‹

```bash
# å®‰è£…è‡ªåŠ¨å¯åŠ¨
cd ~/clawd
./scripts/proactive-engine-auto-install.sh install

# éªŒè¯çŠ¶æ€
./scripts/proactive-engine-auto-install.sh status

# æŸ¥çœ‹æ—¥å¿—
tail -f ~/clawd/proactive-data/proactive-engine.log
```

---

**åˆ›å»ºæ—¶é—´**: 2026-02-09
**çŠ¶æ€**: âœ… å·²å®Œæˆå¹¶å¯ç”¨
**ä¸‹ä¸€æ­¥**: å®‰è£…è‡ªåŠ¨å¯åŠ¨ï¼Œäº«å—7Ã—24å°æ—¶ç›‘æ§
