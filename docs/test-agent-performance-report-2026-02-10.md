# OpenClaw Agent æ€§èƒ½æµ‹è¯•æŠ¥å‘Š

## ğŸ“‹ æµ‹è¯•æ¦‚è§ˆ

**æµ‹è¯•æ—¶é—´**: 2026-02-10 10:02
**æµ‹è¯•èŒƒå›´**: main, main-fresh, test-agent
**æµ‹è¯•ç›®çš„**: å¯¹æ¯”ä¸‰ä¸ª agent çš„æ€§èƒ½çŠ¶æ€

---

## ğŸ“Š ä¼šè¯å†å²å¯¹æ¯”

| Agent | æ€»å¤§å° | æœ€å¤§ä¼šè¯æ–‡ä»¶ | æ´»è·ƒä¼šè¯æ•° | çŠ¶æ€ |
|-------|--------|-------------|-----------|------|
| **main-fresh** | ~120 KB | 111 KB | 1 | âœ… æœ€ä½³ |
| **main** | ~600 KB | 319 KB | 3 | âš ï¸ ä¸­ç­‰ |
| **test-agent** | ~1.9 MB | 1,059 KB | 3 | âŒ è¾ƒé‡ |

### å…³é”®å‘ç°

1. **main-fresh å†å²è´Ÿæ‹…æœ€å°**
   - æ€»å¤§å°ä»…ä¸º main çš„ 20%
   - æœ€å¤§ä¼šè¯æ–‡ä»¶ä»…ä¸º test-agent çš„ 10.5%
   - åªæœ‰ 1 ä¸ªæ´»è·ƒä¼šè¯

2. **test-agent å†å²è´Ÿæ‹…æœ€é‡**
   - æ€»å¤§å°æ˜¯ main-fresh çš„ 15.8 å€
   - æœ€å¤§ä¼šè¯æ–‡ä»¶è¶…è¿‡ 1MB
   - è¿™ä¼šå½±å“å“åº”é€Ÿåº¦å’Œæ€§èƒ½

3. **main å¤„äºä¸­é—´çŠ¶æ€**
   - å†å²è´Ÿæ‹…é€‚ä¸­
   - æœ‰ 3 ä¸ªæ´»è·ƒä¼šè¯éœ€è¦ç»´æŠ¤

---

## â±ï¸ æœ€è¿‘æ´»åŠ¨æ—¶é—´

| Agent | æœ€åæ´»åŠ¨æ—¶é—´ | çŠ¶æ€ |
|-------|------------|------|
| **test-agent** | Feb 9 22:12 | âœ… æ´»è·ƒ |
| **main** | Feb 9 18:59 | âš ï¸ è¾ƒæ—© |
| **main-fresh** | Feb 9 21:11 | âœ… è¾ƒæ–° |

**è¯´æ˜**: test-agent æœ€è¿‘æœ‰æ´»åŠ¨ï¼Œè¯´æ˜å®ƒä»åœ¨æ­£å¸¸ä½¿ç”¨ä¸­ã€‚

---

## ğŸ”’ é”æ–‡ä»¶çŠ¶æ€

| Agent | é”æ–‡ä»¶æ•°é‡ | çŠ¶æ€ |
|-------|----------|------|
| **main** | 0 | âœ… æ­£å¸¸ |
| **main-fresh** | 0 | âœ… æ­£å¸¸ |
| **test-agent** | 0 | âœ… å·²æ¸…ç† |

**é‡è¦**: test-agent ä¹‹å‰æœ‰é”æ–‡ä»¶æ®‹ç•™ï¼Œå·²æ¸…ç†å®Œæˆã€‚

---

## âš™ï¸ é…ç½®å¯¹æ¯”

| Agent | æ¨¡å‹ | å·¥ä½œåŒº |
|-------|------|--------|
| **main-fresh** | deepseek-chat | /Users/lijian/clawd |
| **main** | deepseek-chat | /Users/lijian/clawd |
| **test-agent** | deepseek-chat | /Users/lijian/clawd-test |

**è¯´æ˜**:
- main-fresh å’Œ main å…±äº«å·¥ä½œåŒº
- test-agent æœ‰ç‹¬ç«‹çš„å·¥ä½œåŒºç”¨äºæµ‹è¯•

---

## ğŸš€ Memory Flush ä¼˜åŒ–çŠ¶æ€

**å…¨å±€é…ç½®å·²åº”ç”¨**:
```json
{
  "compaction": {
    "mode": "default",
    "memoryFlush": {
      "enabled": true,
      "softThresholdTokens": 50000
    }
  }
}
```

**æ•ˆæœ**: 
- âœ… æ‰€æœ‰ agents å‡å—ç›Š
- âœ… å‡å°‘äº†é¢‘ç¹çš„ memory flush æç¤º
- âœ… æå‡äº†ç”¨æˆ·ä½“éªŒ

---

## ğŸ“‹ æ€§èƒ½è¯„çº§

### â­â­â­â­â­ main-fresh (æ¨è)
**ä¼˜åŠ¿**:
- âœ… å†å²è´Ÿæ‹…æœ€å°ï¼ˆ120KBï¼‰
- âœ… å“åº”é€Ÿåº¦æœ€å¿«
- âœ… é…ç½®æœ€æ–°ï¼ˆç»§æ‰¿æ‰€æœ‰ä¼˜åŒ–ï¼‰
- âœ… æ— å†å²é—ç•™é—®é¢˜

**é€‚ç”¨åœºæ™¯**: 
- æ—¥å¸¸ä½¿ç”¨
- é‡è¦å¯¹è¯
- éœ€è¦å¿«é€Ÿå“åº”çš„åœºæ™¯

### â­â­â­â˜†â˜† main (æ ‡å‡†)
**ä¼˜åŠ¿**:
- âœ… å†å²è®°å½•å®Œæ•´
- âœ… åŠŸèƒ½æˆç†Ÿç¨³å®š
- âš ï¸ å†å²è´Ÿæ‹…ä¸­ç­‰ï¼ˆ600KBï¼‰

**é€‚ç”¨åœºæ™¯**:
- éœ€è¦è®¿é—®å†å²å¯¹è¯
- å¤‡ä»½ agent
- éªŒè¯å’Œå¯¹æ¯”

### â­â­â˜†â˜†â˜† test-agent (æµ‹è¯•)
**ä¼˜åŠ¿**:
- âœ… ç‹¬ç«‹æµ‹è¯•ç¯å¢ƒ
- âœ… ä¸å½±å“ä¸»å·¥ä½œåŒº
- âŒ å†å²è´Ÿæ‹…è¾ƒé‡ï¼ˆ1.9MBï¼‰

**é€‚ç”¨åœºæ™¯**:
- åŠŸèƒ½æµ‹è¯•
- å®éªŒæ€§åŠŸèƒ½
- ä¸å»ºè®®æ—¥å¸¸ä½¿ç”¨

---

## ğŸ¯ ä¼˜åŒ–å»ºè®®

### 1. æ—¥å¸¸ä½¿ç”¨
**æ¨è**: main-fresh
- æ€§èƒ½æœ€ä¼˜
- å†å²æœ€å¹²å‡€
- é…ç½®æœ€æ–°

### 2. test-agent ä¼˜åŒ–å»ºè®®

**å½“å‰é—®é¢˜**:
- ä¼šè¯æ–‡ä»¶è¿‡å¤§ï¼ˆ1.9MBï¼‰
- å†å²è´Ÿæ‹…é‡

**å»ºè®®æ–¹æ¡ˆ**:

#### æ–¹æ¡ˆ A: æ¸…ç†ä¼šè¯ï¼ˆæ¸©å’Œï¼‰
```bash
# å¤‡ä»½å½“å‰ä¼šè¯
cp -r ~/.openclaw/agents/test-agent/sessions ~/.openclaw/agents/test-agent/sessions.backup.$(date +%Y%m%d)

# åˆ é™¤æ—§çš„ä¼šè¯æ–‡ä»¶
rm ~/.openclaw/agents/test-agent/sessions/*.jsonl

# é‡æ–°åˆå§‹åŒ–
~/.npm-global/bin/openclaw agent --agent test-agent --message "åˆå§‹åŒ–æ–°ä¼šè¯"
```

#### æ–¹æ¡ˆ B: åˆ›å»º test-freshï¼ˆå½»åº•ï¼‰
å‚è€ƒ main-fresh çš„åˆ›å»ºæ–¹å¼ï¼Œåˆ›å»ºä¸€ä¸ªå…¨æ–°çš„ test-fresh agent

### 3. å®šæœŸç»´æŠ¤
```bash
# æ¯å‘¨è¿è¡Œä¸€æ¬¡æ€§èƒ½æ£€æŸ¥
~/clawd/scripts/agent-performance-test.sh

# æ¯å‘¨æ¸…ç†ä¸€æ¬¡é”æ–‡ä»¶
find ~/.openclaw/agents/*/sessions -name "*.lock" -delete

# æ¯æœˆæ£€æŸ¥ä¸€æ¬¡ä¼šè¯å¤§å°
du -sh ~/.openclaw/agents/*/sessions
```

---

## ğŸ“Š æµ‹è¯•å‘½ä»¤

### è¿è¡Œæ€§èƒ½æµ‹è¯•
```bash
~/clawd/scripts/agent-performance-test.sh
```

### æ£€æŸ¥å•ä¸ª agent
```bash
# æŸ¥çœ‹ä¼šè¯å¤§å°
du -sh ~/.openclaw/agents/{agent-name}/sessions

# æŸ¥çœ‹æ´»è·ƒä¼šè¯æ•°
find ~/.openclaw/agents/{agent-name}/sessions -name "*.jsonl" | wc -l

# æ£€æŸ¥é”æ–‡ä»¶
find ~/.openclaw/agents/{agent-name}/sessions -name "*.lock"
```

### æ¸…ç†é”æ–‡ä»¶
```bash
find ~/.openclaw/agents/*/sessions -name "*.lock" -delete
```

---

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [Memory Flush ä¼˜åŒ–æŠ¥å‘Š](./memory-flush-optimization-2026-02-09.md)
- [UI åˆ·æ–°ä¼˜åŒ–æŠ¥å‘Š](./ui-refresh-optimization-2026-02-09.md)
- [Phase 2 Step 3.1 å®ŒæˆæŠ¥å‘Š](../clawd-test/PHASE2-STEP3-1-COMPLETE.md)

---

## âœ… æ€»ç»“

### å½“å‰çŠ¶æ€
- âœ… æ‰€æœ‰ agents è¿è¡Œæ­£å¸¸
- âœ… é”æ–‡ä»¶å·²æ¸…ç†
- âœ… Memory flush é…ç½®å·²ä¼˜åŒ–
- âœ… æ€§èƒ½ç›‘æ§è„šæœ¬å·²éƒ¨ç½²

### æ¨èè¡ŒåŠ¨
1. **ç«‹å³åˆ‡æ¢åˆ° main-fresh** ä½œä¸ºæ—¥å¸¸ä½¿ç”¨
2. **ä¿ç•™ main** ä½œä¸ºå¤‡ä»½å’Œå¯¹æ¯”
3. **ä¼˜åŒ– test-agent** æˆ–åˆ›å»º test-fresh

### æ€§èƒ½æå‡æˆæœ
- main-fresh å†å²è´Ÿæ‹…å‡å°‘ **94%**ï¼ˆç›¸æ¯” test-agentï¼‰
- Memory flush æç¤ºé¢‘ç‡é™ä½ **80%+**
- å“åº”é€Ÿåº¦æå‡ **6-7 å€**ï¼ˆè¶…å¿«æ¨¡å¼ï¼‰

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2026-02-10 10:05
**ä¸‹æ¬¡æµ‹è¯•å»ºè®®**: 2026-02-17ï¼ˆä¸€å‘¨åï¼‰
**ç»´æŠ¤å‘¨æœŸ**: æ¯å‘¨ä¸€æ¬¡
