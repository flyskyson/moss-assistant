# 🚀 MOSS Assistant - 一键启动指南

## 📋 启动方式总览

MOSS Assistant 提供多种启动方式，满足不同场景需求：

| 启动方式 | 文件 | 适用场景 | 推荐度 |
|---------|------|---------|--------|
| 🌟 **智能启动器** | `launcher.py` | 日常使用，完整检查 | ⭐⭐⭐⭐⭐ |
| 🔥 **一键启动 (Windows)** | `一键启动.bat` | Windows 快速启动 | ⭐⭐⭐⭐⭐ |
| 🔥 **一键启动 (Linux/Mac)** | `一键启动.sh` | Linux/Mac 快速启动 | ⭐⭐⭐⭐⭐ |
| ⚡ **快速启动** | `启动 MOSS.bat` | Windows 最快启动 | ⭐⭐⭐⭐ |
| 🐍 **Python 直接启动** | `start_moss.py` | 开发调试 | ⭐⭐⭐ |

---

## 🌟 方式 1: 智能启动器（推荐）

### 特点
- ✅ 完整的环境检测（Python、pip）
- ✅ 自动加载 .env 环境变量
- ✅ 自动安装缺失依赖
- ✅ 核心文件完整性检查
- ✅ 健康检查（配置、API Key、端口）
- ✅ 自动打开浏览器
- ✅ 友好的错误提示

### 使用方法

#### Windows
```bash
# 双击运行
启动 MOSS.bat

# 或命令行
python launcher.py
```

#### Linux/Mac
```bash
# 添加执行权限
chmod +x 一键启动.sh

# 运行
./一键启动.sh
```

---

## 🔥 方式 2: 一键启动脚本

### Windows - `一键启动.bat`

**特点:**
- 独立脚本，无需 Python 预先运行
- 完整的 6 步启动流程
- 彩色输出，美观界面
- 自动打开浏览器

**使用:**
```bash
# 双击运行
一键启动.bat
```

**启动流程:**
```
[1/6] 检测运行环境...
[2/6] 加载环境变量...
[3/6] 检查项目依赖...
[4/6] 检查核心文件...
[5/6] 检查数据目录...
[6/6] 启动 MOSS Assistant...
```

### Linux/Mac - `一键启动.sh`

**特点:**
- 彩色终端输出
- 完整的环境检测
- 自动依赖安装
- 健康检查

**使用:**
```bash
# 添加执行权限
chmod +x 一键启动.sh

# 运行
./一键启动.sh
```

---

## ⚡ 方式 3: 快速启动

### Windows - `启动 MOSS.bat`

**特点:**
- 最简界面
- 快速启动
- 适合已确认环境正常的场景

**使用:**
```bash
# 双击运行
启动 MOSS.bat
```

---

## 🐍 方式 4: Python 直接启动

### `start_moss.py`

**特点:**
- 简单直接
- 适合开发调试
- 可集成到其他脚本

**使用:**
```bash
python start_moss.py
```

---

## 📊 启动流程详解

### 完整的 7 步启动流程

#### 1️⃣ **环境检测**
- 检查 Python 版本（需要 ≥ 3.8）
- 检查 pip 是否可用

#### 2️⃣ **加载环境变量**
- 读取 `.env` 文件
- 检查 `DEEPSEEK_API_KEY`

#### 3️⃣ **检查依赖**
- 检查 `requirements.txt`
- 自动安装缺失的包
- 验证关键依赖（streamlit, yaml, openai）

#### 4️⃣ **核心文件检查**
- 验证 `moss.py`、`app.py`、`config.yaml`
- 验证 `core/` 目录

#### 5️⃣ **数据目录检查**
- 创建 `data/` 目录（如果不存在）
- 创建 `data/logs/` 目录

#### 6️⃣ **健康检查**
- 验证配置文件有效性
- 检查 API Key
- 检查端口 8501 是否可用

#### 7️⃣ **启动服务**
- 启动 Streamlit
- 自动打开浏览器访问 http://localhost:8501

---

## 🛠️ 故障排查

### 问题 1: Python 未安装

**症状:**
```
❌ 错误: 未检测到 Python
```

**解决方案:**
1. 下载 Python 3.8+: https://www.python.org/downloads/
2. 安装时勾选 "Add Python to PATH"
3. 重启命令行窗口

### 问题 2: 依赖安装失败

**症状:**
```
❌ 错误: 依赖安装失败
```

**解决方案:**
```bash
# 手动安装依赖
pip install -r requirements.txt

# 或使用国内镜像
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 问题 3: 端口被占用

**症状:**
```
⚠️ 端口 8501 已被占用
```

**解决方案:**
```bash
# Windows: 查找并关闭占用端口的进程
netstat -ano | findstr :8501
taskkill /F /PID <进程ID>

# Linux/Mac:
lsof -i :8501
kill -9 <进程ID>
```

### 问题 4: API Key 未设置

**症状:**
```
⚠️ 警告: .env 文件中未找到 DEEPSEEK_API_KEY
```

**解决方案:**
1. 创建 `.env` 文件
2. 添加内容：
```
DEEPSEEK_API_KEY=你的API密钥
```

### 问题 5: 编码错误（Windows）

**症状:**
```
UnicodeEncodeError
```

**解决方案:**
```bash
# 设置控制台编码
chcp 65001
```

---

## 💡 使用建议

### 首次使用
推荐使用 **智能启动器** (`launcher.py`) 或 **一键启动脚本**，会自动完成所有检查和配置。

### 日常使用
- **Windows**: 使用 `启动 MOSS.bat` 或 `一键启动.bat`
- **Linux/Mac**: 使用 `一键启动.sh`

### 开发调试
使用 `start_moss.py` 或直接运行：
```bash
streamlit run app.py
```

---

## 🎯 启动后操作

### 1. 浏览器会自动打开
访问: http://localhost:8501

### 2. 如果浏览器未自动打开
手动在浏览器中访问: http://localhost:8501

### 3. 停止服务
在命令行窗口按 `Ctrl+C`

### 4. 重新启动
再次运行启动脚本即可

---

## 📝 启动日志示例

### 成功启动
```
╔════════════════════════════════════════════════════════╗
║     🤖 MOSS Assistant - 智能启动器 v2.0              ║
║     苏格拉底式辩论伙伴 + 全能个人助理                 ║
╚════════════════════════════════════════════════════════╝

[1/7] 检测运行环境...

✅ Python 版本: 3.14.0
✅ pip 已就绪

[2/7] 加载环境变量...

✅ 发现 .env 文件
✅ DeepSeek API Key: sk-263512fc...

[3/7] 检查项目依赖...

✅ 核心依赖已安装

[4/7] 检查核心文件...

✅ 核心文件检查通过

[5/7] 检查数据目录...

✅ data/ 目录存在
✅ 数据目录就绪

[6/7] 健康检查...

✅ 配置文件有效
✅ API Key 已设置
✅ 端口 8501 可用

健康检查: 3/3 项通过

[7/7] 启动 MOSS Assistant...

════════════════════════════════════════════════════════

🌐 访问地址: http://localhost:8501
📱 移动端: http://localhost:8501

💡 提示:
   - 浏览器将自动打开（如果没有，请手动访问上面的地址）
   - 按 Ctrl+C 停止服务
   - 关闭此窗口也会停止服务

════════════════════════════════════════════════════════
```

---

## 🎉 总结

现在你有 **5 种启动方式** 可选：

1. 🌟 **智能启动器** - 最全面，首次使用推荐
2. 🔥 **一键启动脚本** - 日常使用最佳
3. ⚡ **快速启动** - 最简单快速
4. 🐍 **Python 直接启动** - 开发调试
5. 📦 **手动启动** - `streamlit run app.py`

**选择最适合你的方式，享受 MOSS 带来的智能体验！** 🚀

---

*最后更新：2025-01-10*
