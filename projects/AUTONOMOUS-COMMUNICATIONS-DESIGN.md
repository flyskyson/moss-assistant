# 项目计划：自主可控的国内通信渠道

> **文档版本**: v1.0
> **创建日期**: 2026-02-07
> **作者**: MOSS
> **状态**: 草案

---

## 1. 项目背景与目标

### 1.1. 背景
当前，我们依赖的第三方通信渠道（如飞书）受到免费额度或政策限制。这不仅影响了通信的稳定性，也增加了潜在的运营风险。

### 1.2. 核心目标
利用现有的阿里云轻量级服务器等资源，**构建一个不受第三方平台额度限制的、稳定可靠、自主可控的国内通信渠道**，确保MOSS与飞天之间的核心通信链路永不中断。

## 2. 核心策略：选择合适的“聊天网关”

我们将重点考察并选择一个开源的“聊天网关”或“消息桥接”服务部署在您的云服务器上。该服务将扮演“翻译官”的角色，将MOSS生成的通知或消息，桥接到国内主流通信工具，并能接收指令。

### 策略一：微信生态集成 (go-cqhttp)
- **描述**: 基于 `OneBot` 标准的聊天机器人框架，专注于QQ和微信生态。
- **优点**: 国内社区支持最强，与微信生态（个人号、公众号、企业微信）结合最紧密，功能强大，支持双向交互。
- **缺点**: 配置相对复杂，可能需要处理“小号”的登录风控问题。

### 策略二：微信个人号管理 (wechaty)
- **描述**: 著名的微信个人号自动化SDK，更偏向于开发框架。
- **优点**: 稳定，适合定制化开发，可以处理更复杂的个人微信交互逻辑。
- **缺点**: 需要一定的开发投入，部署相对复杂。

### 策略三：iOS/Android 单向推送 (Bark)
- **描述**: 轻量级的自部署消息推送服务器，专注于移动设备通知。
- **优点**: 部署极其简单，效率极高，完全免费，适合“每日简报”等纯通知场景。
- **缺点**: 仅支持单向推送（MOSS发送消息给您），不支持双向交互，不适合作为主通信渠道。

## 3. 分阶段实施计划 (Phased Implementation)

我们将通过两个阶段，逐步、安全地将这套策略部署到我们的工作流中。

### **Phase 1 (v1.0): 最小可行产品 (MVP) -> Bark 单向推送 (预计耗时: 30分钟)**

**目标**: 快速部署一个极其简单、可靠的单向通知渠道，确保MOSS可以在云服务器上通过 `Bark` 服务向您的iOS/Android设备发送通知。

**考量**: 
- 部署简单，风险极低。
- 可作为“紧急通知”备用渠道或“每日简报”的推送渠道。

**实施步骤 (草案)**:
1.  **服务器部署Bark服务端**: 在阿里云轻量级服务器上安装Docker，部署Bark容器。
2.  **手机安装Bark App**: 您的iOS/Android设备安装Bark App，获取设备Key。
3.  **测试推送**: MOSS通过 `curl` 命令向Bark服务端发送一条测试消息。

### **Phase 2 (v2.0): 微信生态双向交互 (待规划)**

**目标**: 评估并选择 `go-cqhttp` 或 `wechaty`，在云服务器上部署，实现MOSS与您的微信个人号或企业微信进行双向交互。

**考量**: 
- 功能更强大，但部署复杂度更高。
- 需要处理微信生态的登录与风控问题。

**实施步骤 (草案)**:
1.  **选择技术栈**: 深入研究 `go-cqhttp` 和 `wechaty` 的文档，选择最适合的技术栈。
2.  **部署网关**: 在服务器上部署选定的聊天网关服务。
3.  **集成 OpenClaw**: 配置聊天网关，使其能通过 `Webhook` 或 `API` 与 OpenClaw Gateway 进行双向通信。
4.  **测试与验证**: 确保消息能顺畅地双向流动。

## 4. 成功衡量标准 (Metrics for Success)

1.  **消息送达率**: 消息能在目标设备上100%送达。
2.  **延迟**: 消息从MOSS发送到收到，响应时间控制在3秒以内。
3.  **稳定性**: 7x24小时不间断运行，无意外宕机。
4.  **自主性**: 不再受外部平台（如飞书）的额度或政策限制。

## 5. 风险评估

- **微信风控**: 最主要的风险是微信生态的账号风控，个人号或企业微信可能会被限制。
- **服务器维护**: 需要定期维护云服务器，确保服务稳定。
- **部署复杂度**: Phase 2 的部署和调试可能需要投入较多时间和技术能力。

---

**下一步**: 等待您的批准，以启动 **Phase 1** 的实施。