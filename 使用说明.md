# 🤖 MOSS Assistant 使用说明

## 快速开始（3步）

### 1️⃣ 安装
```bash
# 进入项目目录
cd moss-assistant

# 安装依赖
pip install -r requirements.txt
```

### 2️⃣ 设置 API Key
```bash
# Windows PowerShell
$env:ANTHROPIC_API_KEY="你的API密钥"

# Windows CMD
set ANTHROPIC_API_KEY=你的API密钥

# Mac/Linux
export ANTHROPIC_API_KEY="你的API密钥"
```

### 3️⃣ 启动
```bash
# Windows: 双击 start.bat
# Mac/Linux: 运行 ./start.sh

# 或者手动启动
streamlit run app.py
```

然后在浏览器打开：http://localhost:8501

---

## 四种角色

### 🎓 导师
**触发场景**：重大决策（创业、辞职、投资）

**示例**：
```
你: 我想辞职创业
MOSS: 作为你的导师，我想先问你几个问题：
      1. 你创业的真实动机是什么？
      2. 你能承受最坏的情况吗？
      3. 如果失败了，你的 Plan B 是什么？
```

### 🤝 伙伴
**触发场景**：探索性话题（讨论问题、思考原因）

**示例**：
```
你: 怎么看当今的女权问题？
MOSS: 这个问题很有意思！让我们一起探索一下。
      我注意到你提到了XX，这让我想到另一个角度...
```

### 📋 秘书
**触发场景**：执行任务（查资料、写报告、提醒）

**示例**：
```
你: 帮我写个周报
MOSS: 好的，我来帮你写周报。
      [生成周报中...]
```

### 💚 朋友
**触发场景**：情绪低落（难过、迷茫、焦虑）

**示例**：
```
你: 最近感觉很迷茫
MOSS: 我能理解你现在的感受。
      如果你愿意的话，可以和我说说...
```

---

## 特殊命令

| 命令 | 功能 | 示例 |
|------|------|------|
| `/info 姓名 张三` | 更新用户信息 | `/info 职业 程序员` |
| `/goal 学好Python` | 添加目标 | `/goal 年薪百万` |
| `/backup` | 备份数据 | `/backup` |
| `/exit` | 退出（命令行模式） | `/exit` |

---

## 重要提醒

### ✅ 记忆功能
- 每次对话**自动保存**
- 下次启动**自动加载**
- **永远不会忘记你**

### ✅ 数据位置
所有数据在 `data/` 目录：
- `user_model.json` - 你的模型
- `conversations.json` - 对话历史
- `interactions.json` - 交互日志

### ✅ 备份建议
定期备份 `data/` 目录，或者：
- 使用 GitHub 存储（私有仓库）
- 使用云同步（Dropbox、OneDrive）

---

## 常见问题

### Q1: 忘记我是谁了？
**A**: 检查 `data/user_model.json` 是否存在

### Q2: API 调用失败？
**A**:
1. 检查 API Key 是否设置
2. 检查网络连接
3. 检查 API 额度

### Q3: 如何重置？
**A**: 删除 `data/` 目录，重新启动

### Q4: 如何修改角色行为？
**A**: 编辑 `config.yaml` 文件，找到对应角色的 `system_prompt`

---

## 配置自定义

### 修改触发关键词
编辑 `config.yaml`：
```yaml
roles:
  mentor:
    trigger_keywords:
      - "决定"
      - "选择"
      - "创业"  # 可以添加更多
```

### 修改 Prompt
```yaml
roles:
  mentor:
    system_prompt: |
      你的自定义 Prompt 内容...
```

### 更换存储方式
```yaml
memory:
  backend: "sqlite"  # 从 json 改为 sqlite
```

---

## 接入 GitHub

如果你想在工作区管家系统中管理：

1. **创建 GitHub 仓库**
   ```bash
   git remote add origin https://github.com/你的用户名/moss-assistant.git
   git push -u origin master
   ```

2. **创建数据分支**（可选）
   ```bash
   git checkout -b moss-data
   cp -r data/ moss-data/
   git add moss-data/
   git commit -m "Add MOSS data"
   git push origin moss-data
   ```

3. **自动同步**（未来功能）
   - 可以添加 Git 钩子自动同步
   - 或使用 GitHub Actions 定期备份

---

## 需要帮助？

1. 查看 `README.md` - 完整功能说明
2. 查看 `QUICKSTART.md` - 快速开始
3. 查看 `PROJECT_SUMMARY.md` - 项目总结
4. 运行测试：`python tests/test_basic.py`

---

**开始使用吧！MOSS 已经准备好了解你。🚀**
